<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ğŸ’€ Horror Hash Tool</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>ğŸ’€ Horror Hash Tool</h1>

        <!-- BÄƒm vÄƒn báº£n / tá»‡p -->
        <form method="POST" enctype="multipart/form-data">
            <h2>ğŸ§¬ BÄƒm vÄƒn báº£n hoáº·c tá»‡p</h2>

            <label>âœï¸ Nháº­p vÄƒn báº£n cáº§n bÄƒm:</label><br>
            <textarea name="text_input" rows="6">{{ text_input }}</textarea><br><br>

            <label>ğŸ“ Hoáº·c chá»n tá»‡p Ä‘á»ƒ bÄƒm:</label><br>
            <div class="file-upload">
                <label for="fileInput">ğŸ“ Chá»n tá»‡p</label>
                <input type="file" name="file" id="fileInput" onchange="updateFilename(this)">
                <span id="file-name">ChÆ°a cÃ³ tá»‡p</span>
            </div>

            <div class="button-group">
                <button type="submit" name="hash_sha256">ğŸ”“ BÄƒm SHA-256</button>
                <button type="submit" name="hash_sha512">ğŸ§¬ BÄƒm SHA-512</button>
            </div>
        </form>

        {% if hash_result %}
            <div class="result">
                <h3>â˜ ï¸ Káº¿t quáº£ {{ selected_algo }}:</h3>
                {% if file_uploaded %}
                    <p><strong>File:</strong> {{ file_uploaded }}</p>
                {% endif %}
                <textarea id="hashOutput" rows="4" style="width:100%;">{{ hash_result }}</textarea>
                <button class="copy-btn" onclick="copyHash()">ğŸ“‹ Sao chÃ©p</button>
                <div class="copy-msg" id="copyMessage" style="display: none;">âœ… ÄÃ£ sao chÃ©p!</div>
            </div>
        {% endif %}

        <!-- Kiá»ƒm tra toÃ n váº¹n -->
        <form method="POST" enctype="multipart/form-data">
            <h2>ğŸ” Kiá»ƒm tra tÃ­nh toÃ n váº¹n tá»‡p báº±ng SHA-512</h2>

            <div class="file-upload">
                <label for="fileInput2">ğŸ“ Chá»n tá»‡p</label>
                <input type="file" name="file" id="fileInput2" onchange="updateFilename(this)">
                <span id="file-name">ChÆ°a cÃ³ tá»‡p</span>
            </div>

            <label>ğŸ” Nháº­p mÃ£ bÄƒm SHA-512 Ä‘Ã£ biáº¿t:</label><br>
            <textarea name="entered_hash" rows="4" style="width:100%;" required>{{ entered_hash }}</textarea><br><br>

            <button type="submit" name="verify_hash">ğŸ§ª Kiá»ƒm tra toÃ n váº¹n</button>
        </form>

        {% if verify_result %}
            <div class="result">
                <h3>{{ verify_result }}</h3>
                {% if file_uploaded %}
                    <p><strong>File kiá»ƒm tra:</strong> {{ file_uploaded }}</p>
                {% endif %}
            </div>
        {% endif %}
    </div>

    <script>
        function copyHash() {
            const copyText = document.getElementById("hashOutput");
            copyText.select();
            copyText.setSelectionRange(0, 99999);
            document.execCommand("copy");

            const msg = document.getElementById("copyMessage");
            msg.style.display = "block";
            setTimeout(() => {
                msg.style.display = "none";
            }, 2000);
        }

        function updateFilename(input) {
            const fileName = input.files[0] ? input.files[0].name : "ChÆ°a cÃ³ tá»‡p";
            const span = input.parentNode.querySelector('span');
            span.textContent = fileName;
        }
    </script>
</body>
</html>
